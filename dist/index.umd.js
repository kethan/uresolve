!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).uresolver={})}(this,(function(e){e.resolve=(e,t={})=>({resolve:async(r,n)=>{if(0===Object.keys(e).length)return r;const o=async r=>{const o={};let s={};r=await(t.converter?t.converter(r,n):r);const a=new Set([...Object.keys(r),...Object.keys(e)]);if(await Promise.all(Array.from(a).map((async t=>{const a=void 0!==r[t]?r[t]:null,c=e[t]?await(async(t,r,o,s)=>{try{const s=await e[t](r,o,n);return void 0!==s?{[t]:s}:{}}catch(e){return s[t]={message:e.message},{}}})(t,a,r,o):{[t]:a};s={...s,...c}}))),Object.keys(o).length){const e=new Error("error");throw e.data=o,e}return s};return Array.isArray(r)?Promise.all(r.map(o)):o(r)}})}));